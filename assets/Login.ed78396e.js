import{e as f,k as a,o as w,u as L,f as k,g as s,w as v,x as U,A as y,F as H}from"./vendor.b7d6f9a9.js";import{u as I}from"./useIfLoading.2e0055e0.js";import{u as T,a as x,c as E,U as c,b as S,m as b}from"./useIdentifyCompName.01340045.js";import{u as A}from"./index.7eba349c.js";const C={};var z=f({name:"Login",props:C,components:{},setup(){const e=a(!1),p=T();w(async()=>{await p()}),x();const h=A(),t=L(),i=a(""),u=a(""),m=a("admin001"),g=a("123456"),l=k(()=>({username:i.value,password:u.value})),o=a(!1),r=n=>{e.value=!1,o.value=!1,h.login(n).then(d=>{if(d.isLogin&&d.data)return e.value=I().loading.value,t.push({path:t.currentRoute.value.query.redirect||"/"});o.value=!0})};return{username:i,password:u,defaultUsername:m,defaultPassword:g,userLoginInfo:l,onLogin:r,keyUpHandler:n=>{["Enter"].includes(n.key)&&r(l.value)},clickHandler:n=>{r(n)},isLoading:e,showError:o}},render(){return s(H,null,[s("section",{class:E.login},[s(c,{title:"\u7528\u6237\u540D",errorText:"\u5F53\u524D\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u5339\u914D",username:this.username,"onUpdate:username":e=>this.username=e,placeholder:`\u9ED8\u8BA4\u767B\u5F55\u540D\uFF1A${this.defaultUsername}`,showError:this.showError},null),s(c,{title:"\u5BC6\u7801",inputType:"password",errorText:"\u5F53\u524D\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u5339\u914D",password:this.password,"onUpdate:password":e=>this.password=e,onKeyUp:this.keyUpHandler,placeholder:`\u9ED8\u8BA4\u5BC6\u7801\uFF1A${this.defaultPassword}`,showError:this.showError},null),s(S,{btnName:"\u7ACB\u5373\u767B\u5F55",tipText:"\u6CA1\u6709\u8D26\u53F7\uFF1F",linkTo:"/register",linkText:"\u6CE8\u518C\u65B0\u7528\u6237",onHandleSubmit:()=>{this.clickHandler(this.userLoginInfo)}},null)]),v(s("section",{class:b.mask},[s(y,{tip:"Loading...",size:"large",spinning:this.isLoading},null)]),[[U,this.isLoading]])])}});export{z as default};
