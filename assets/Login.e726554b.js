import{d as g,r as a,g as v,u as k,s as y,c as s,w as L,v as U,F as I}from"./index.4367fab1.js";import{u}from"./useIfLoading.8c90111b.js";import{S as r,s as T,u as E,a as H,c as S,U as m,b as x,m as b}from"./mask-layer.module.d7dbf0ba.js";import"./isSymbol.9ea0fba9.js";import"./SearchOutlined.2390ba86.js";import"./index.4170ac31.js";import"./index.aa191d72.js";r.setDefaultIndicator=T;r.install=function(e){return e.component(r.name,r),e};var z=g({name:"Login",props:{},components:{},setup(){const e=a(!1);E().then(),H();const h=v(),l=k(),d=a(""),c=a(""),w=a("admin000"),f=a("123456"),p=y(()=>({username:d.value,password:c.value})),n=a(!1),o=async t=>{e.value=!0,n.value=!1;const i=await h.login(t);return i.data?(e.value=u().value,l.push({path:l.currentRoute.value.query.redirect||"/"}).then(()=>{e.value=u().value}),window&&window.location.reload()):(i.status==="fail"&&(n.value=!0),e.value=u().value),i};return{username:d,password:c,defaultUsername:w,defaultPassword:f,userLoginInfo:p,onLogin:o,keyUpHandler:t=>{["Enter"].includes(t.key)&&o(p.value)},clickHandler:async t=>{await o(t)},isLoading:e,showError:n}},render(){return s(I,null,[s("section",{class:S.login},[s(m,{title:"\u7528\u6237\u540D",errorText:"\u5F53\u524D\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u5339\u914D",username:this.username,"onUpdate:username":e=>this.username=e,placeholder:`\u9ED8\u8BA4\u767B\u5F55\u540D\uFF1A${this.defaultUsername}`,showError:this.showError},null),s(m,{title:"\u5BC6\u7801",inputType:"password",errorText:"\u5F53\u524D\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u5339\u914D",password:this.password,"onUpdate:password":e=>this.password=e,onKeyUp:this.keyUpHandler,placeholder:`\u9ED8\u8BA4\u5BC6\u7801\uFF1A${this.defaultPassword}`,showError:this.showError},null),s(x,{btnName:"\u7ACB\u5373\u767B\u5F55",tipText:"\u6CA1\u6709\u8D26\u53F7\uFF1F",linkTo:"/register",linkText:"\u6CE8\u518C\u65B0\u7528\u6237",onHandleSubmit:async()=>{await this.clickHandler(this.userLoginInfo)}},null)]),L(s("section",{class:b.mask},[s(r,{tip:"Loading...",size:"large",spinning:this.isLoading},null)]),[[U,this.isLoading]])])}});export{z as default};
